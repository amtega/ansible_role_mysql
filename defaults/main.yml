---
# Role default lower priority variables
# Switch to indicate if role install mysql
mysql_install: yes
# Release to install (55,56,57 and 80 are suported)
mysql_release: "57"
# Version to install. Only avaliable on CentOS / RHEL
mysql_version: "5.7.18-1"
# Disable gpg signature check
mysql_disable_gpg_check: yes
# Switch to indicate if role configure secure installation
mysql_configure: true
# Switch to indicate if role configure replication
mysql_implement_replication: false
# Mysql privilege user credentials
mysql_root_password: 'd3f4ultp4ssw0rd'
# Indicate if you want create a file with credentials for root autologin
mysql_create_user_autologin: true
# Restrict root user access
mysql_root_allowed_hosts:
  - 127.0.0.1
  - ::1
  - localhost

# Variables to fill the my.cnf file
# General purpose
mysql_port: 3306
mysql_character_set_server: utf8
mysql_collation_server: utf8_spanish_ci
mysql_datadir: /var/lib/mysql
mysql_ignore_db_dir: lost+found
mysql_join_buffer_size: 256M
mysql_key_buffer_size: 256M
mysql_max_allowed_packet: 32M
mysql_max_connect_errors: 1000000
mysql_max_connections: 100
mysql_max_heap_table_size: 32M
mysql_open_files_limit: 65535
mysql_socket: /var/lib/mysql/mysql.sock
mysql_sort_buffer_size: 64M
mysql_table_definition_cache: 4096
mysql_table_open_cache: 4096
mysql_thread_cache_size: 500
mysql_tmp_table_size: 32M
mysql_validate_password_policy: LOW
mysql_pid_file: /var/run/mysqld/mysqld.pid
mysql_symbolic_links: 0

# Innodb variables
mysql_innodb_buffer_pool_instances: 2
mysql_innodb_buffer_pool_size: 600M
mysql_innodb_file_per_table: 1
mysql_innodb_flush_log_at_trx_commit: 1
mysql_innodb_flush_method: O_DIRECT
mysql_innodb_log_files_in_group: 2
mysql_innodb_log_file_size: 512M
mysql_innodb_temp_data_file_path: "../mysql_tmp/ibtmp1:50M:autoextend:max:15G"
mysql_innodb_page_cleaners: 2

# Log
mysql_log_timestamps: system
mysql_log_error: /var/log/mysql/mysqld.log

# Slow query
mysql_long_query_time: 3
mysql_slow_query_log: 1
mysql_slow_query_log_file: /var/log/mysql/mysql-slow.log

# Replication
mysql_server_id: 1
mysql_expire_logs_days: 1
mysql_log_bin: /var/lib/mysql_binlog/mysql-bin.log
# mysql_log-bin-index:
# mysql_max_binlog_size:
# mysql_binlog_format:
mysql_relay_log: /var/lib/mysql_binlog/mysql-relay.log
# mysql_relay-log-index:

# Replication user
mysql_replication_user: replicator
mysql_replication_password: 'd3f4ultp4ssw0rd'
mysql_replication_host: '%'
mysql_replication_priv: '*.*:REPLICATION SLAVE,REPLICATION CLIENT'

# Backup user
mysql_backup_user: dbbackup
mysql_backup_password: 'd3f4ultp4ssw0rd'
mysql_backup_priv: '*.*:SELECT,SHOW VIEW,SHOW DATABASES,LOCK TABLES,RELOAD,REPLICATION CLIENT,EXECUTE,PROCESS'

# Replication master info. Asume first inventory host by default
mysql_replication_master: "{{ ansible_play_hosts[0] }}"
mysql_replication_master_port: "{{ hostvars[ mysql_replication_master ][ 'mysql_port' ] }}"



# Only for releases 57 or lower
mysql_internal_tmp_disk_storage_engine: MYISAM
mysql_query_cache_size: 0
mysql_query_cache_type: "OFF"
